---
# Paperless-ngx secrets
apiVersion: v1
kind: Secret
metadata:
  name: paperless-secrets
  namespace: {{ paperless_namespace }}
  labels:
    app.kubernetes.io/name: paperless
    app.kubernetes.io/part-of: paperless
    app.kubernetes.io/managed-by: ansible
type: Opaque
stringData:
  postgres-user: "{{ paperless_postgres_user }}"
  postgres-password: "{{ paperless_postgres_password }}"
  admin-user: "{{ paperless_admin_user }}"
  admin-password: "{{ paperless_admin_password }}"
  admin-email: "{{ paperless_admin_email }}"
  secret-key: "{{ paperless_secret_key }}"
{% if paperless_proton_email is defined and paperless_proton_email | length > 0 %}
  proton-email: "{{ paperless_proton_email }}"
  proton-bridge-password: "{{ paperless_proton_bridge_password }}"
{% endif %}
{% if paperless_tunnel_credentials is defined and paperless_tunnel_credentials | length > 0 %}
---
# Cloudflare Tunnel credentials
apiVersion: v1
kind: Secret
metadata:
  name: paperless-tunnel-credentials
  namespace: {{ paperless_namespace }}
  labels:
    app.kubernetes.io/name: paperless
    app.kubernetes.io/component: tunnel
    app.kubernetes.io/managed-by: ansible
type: Opaque
stringData:
  credentials.json: |
    {{ paperless_tunnel_credentials | indent(4) }}
{% endif %}
