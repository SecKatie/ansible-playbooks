---
# Headlamp Helm Chart Values
# Reference: https://github.com/kubernetes-sigs/headlamp/blob/main/charts/headlamp/values.yaml

# Replica count
replicaCount: {{ headlamp_replica_count }}

# Image configuration
image:
  registry: {{ headlamp_image_registry }}
  repository: {{ headlamp_image_repository }}
{% if headlamp_image_tag %}
  tag: {{ headlamp_image_tag }}
{% endif %}
  pullPolicy: IfNotPresent

# Service configuration
service:
  type: {{ headlamp_service_type }}
  port: {{ headlamp_service_port }}

# Resource limits
resources:
  requests:
    cpu: {{ headlamp_cpu_request }}
    memory: {{ headlamp_memory_request }}
  limits:
    cpu: {{ headlamp_cpu_limit }}
    memory: {{ headlamp_memory_limit }}

# Configuration
config:
  inCluster: {{ headlamp_in_cluster | lower }}
{% if headlamp_base_url %}
  baseURL: {{ headlamp_base_url }}
{% endif %}
{% if headlamp_oidc_enabled %}
  oidc:
    clientID: {{ headlamp_oidc_client_id }}
    clientSecret: {{ headlamp_oidc_client_secret }}
    issuerURL: {{ headlamp_oidc_issuer_url }}
    scopes: {{ headlamp_oidc_scopes }}
{% endif %}

# Service account
serviceAccount:
  create: true
  name: headlamp

# RBAC
rbac:
  create: true

# Persistence (disabled by default)
persistentVolumeClaim:
  enabled: false

# Node affinity - prefer to avoid scheduling on control-plane nodes
affinity:
  nodeAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        preference:
          matchExpressions:
            - key: node-role.kubernetes.io/control-plane
              operator: DoesNotExist
