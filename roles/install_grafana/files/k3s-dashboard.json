{
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": "-- Grafana --",
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "type": "dashboard"
        }
      ]
    },
    "description": "Comprehensive K3s Kubernetes cluster monitoring dashboard with Prometheus metrics",
    "editable": true,
    "gnetId": null,
    "graphTooltip": 1,
    "id": null,
    "links": [],
    "panels": [
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
        "id": 200,
        "panels": [],
        "title": "Cluster Overview",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 0, "y": 1 },
        "id": 201,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_node_info{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Nodes",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 3, "y": 1 },
        "id": 202,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_namespace_created{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Namespaces",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#5794F2", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 6, "y": 1 },
        "id": 203,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_pod_info{job=\"kube-state-metrics\",node=~\"$Node\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Running Pods",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#B877D9", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 9, "y": 1 },
        "id": 204,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_deployment_created{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Deployments",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#FF9830", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 12, "y": 1 },
        "id": 205,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_statefulset_created{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "StatefulSets",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#56A64B", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 15, "y": 1 },
        "id": 206,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_daemonset_created{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "DaemonSets",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#8AB8FF", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 18, "y": 1 },
        "id": 207,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_persistentvolumeclaim_info{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "PVCs",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#CA95E5", "value": null }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 21, "y": 1 },
        "id": 208,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_service_info{job=\"kube-state-metrics\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Services",
        "type": "stat"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 4 },
        "id": 79,
        "panels": [],
        "title": "Cluster Health",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [
              {
                "options": { "match": "null", "result": { "color": "#73BF69", "text": "0" } },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 2 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 4, "x": 0, "y": 5 },
        "id": 117,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(kube_node_spec_unschedulable{job=\"kube-state-metrics\"}) or vector(0)",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Unschedulable Nodes",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [
              {
                "options": { "match": "null", "result": { "color": "#73BF69", "text": "0" } },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 2 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 4, "x": 4, "y": 5 },
        "id": 83,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_node_status_condition{job=\"kube-state-metrics\",condition=\"Ready\",status=\"false\"} == 1) or vector(0)",
            "refId": "A"
          }
        ],
        "title": "Nodes Not Ready",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [
              {
                "options": { "match": "null", "result": { "color": "#73BF69", "text": "0" } },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 2 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 4, "x": 8, "y": 5 },
        "id": 119,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_node_status_condition{job=\"kube-state-metrics\",condition=\"DiskPressure\",status=\"true\"} == 1) or vector(0)",
            "refId": "A"
          }
        ],
        "title": "Disk Pressure",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [
              {
                "options": { "match": "null", "result": { "color": "#73BF69", "text": "0" } },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 2 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 4, "x": 12, "y": 5 },
        "id": 121,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_node_status_condition{job=\"kube-state-metrics\",condition=\"MemoryPressure\",status=\"true\"} == 1) or vector(0)",
            "refId": "A"
          }
        ],
        "title": "Memory Pressure",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [
              {
                "options": { "match": "null", "result": { "color": "#73BF69", "text": "0" } },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 2 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 4, "x": 16, "y": 5 },
        "id": 123,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_node_status_condition{job=\"kube-state-metrics\",condition=\"PIDPressure\",status=\"true\"} == 1) or vector(0)",
            "refId": "A"
          }
        ],
        "title": "PID Pressure",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [
              {
                "options": { "match": "null", "result": { "color": "#73BF69", "text": "0" } },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 2 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 4, "x": 20, "y": 5 },
        "id": 125,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_node_status_condition{job=\"kube-state-metrics\",condition=\"NetworkUnavailable\",status=\"true\"} == 1) or vector(0)",
            "refId": "A"
          }
        ],
        "title": "Network Unavailable",
        "type": "stat"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 8 },
        "id": 300,
        "panels": [],
        "title": "Pod Status",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
            "mappings": []
          },
          "overrides": [
            {
              "matcher": { "id": "byName", "options": "Running" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#73BF69", "mode": "fixed" } }]
            },
            {
              "matcher": { "id": "byName", "options": "Pending" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#FF9830", "mode": "fixed" } }]
            },
            {
              "matcher": { "id": "byName", "options": "Failed" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } }]
            },
            {
              "matcher": { "id": "byName", "options": "Succeeded" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#5794F2", "mode": "fixed" } }]
            },
            {
              "matcher": { "id": "byName", "options": "Unknown" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#B877D9", "mode": "fixed" } }]
            }
          ]
        },
        "gridPos": { "h": 6, "w": 6, "x": 0, "y": 9 },
        "id": 301,
        "options": {
          "displayLabels": ["value"],
          "legend": { "displayMode": "table", "placement": "right", "values": ["value", "percent"] },
          "pieType": "donut",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "tooltip": { "mode": "single" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"})", "legendFormat": "Running", "refId": "A" },
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Pending\"})", "legendFormat": "Pending", "refId": "B" },
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Failed\"})", "legendFormat": "Failed", "refId": "C" },
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Succeeded\"})", "legendFormat": "Succeeded", "refId": "D" },
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Unknown\"})", "legendFormat": "Unknown", "refId": "E" }
        ],
        "title": "Pod Status Distribution",
        "type": "piechart"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 3 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 6, "y": 9 },
        "id": 302,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Pending\"}) or vector(0)",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Pending",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 3 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 9, "y": 9 },
        "id": 303,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Failed\"}) or vector(0)",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Failed",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 5 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 6, "y": 12 },
        "id": 304,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(increase(kube_pod_container_status_restarts_total{job=\"kube-state-metrics\"}[1h]))",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Restarts (1h)",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 1 },
                { "color": "#F2495C", "value": 3 }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 3, "w": 3, "x": 9, "y": 12 },
        "id": 305,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "count(kube_pod_container_status_waiting_reason{job=\"kube-state-metrics\",reason!=\"\"}) or vector(0)",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Waiting",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 20,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 6, "w": 12, "x": 12, "y": 9 },
        "id": 306,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "right" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"})", "legendFormat": "Running", "refId": "A" },
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Pending\"})", "legendFormat": "Pending", "refId": "B" },
          { "expr": "sum(kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Failed\"})", "legendFormat": "Failed", "refId": "C" }
        ],
        "title": "Pod Status Over Time",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 15 },
        "id": 71,
        "panels": [],
        "title": "Resource Usage",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "description": "CPU cores used vs total available",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "decimals": 2,
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 70 },
                { "color": "#F2495C", "value": 85 }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 4, "x": 0, "y": 16 },
        "id": 6,
        "options": {
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[2m])) / sum(machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "CPU Used ($Node)",
        "type": "gauge"
      },
      {
        "datasource": "$cluster",
        "description": "Memory used vs total available",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "decimals": 2,
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 70 },
                { "color": "#F2495C", "value": 85 }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 4, "x": 4, "y": 16 },
        "id": 4,
        "options": {
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) / sum(machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Memory Used ($Node)",
        "type": "gauge"
      },
      {
        "datasource": "$cluster",
        "description": "CPU cores requested vs total available",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "decimals": 2,
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 65 },
                { "color": "#F2495C", "value": 90 }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 4, "x": 8, "y": 16 },
        "id": 7,
        "options": {
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",node=~\"^$Node$\",resource=\"cpu\"}) / sum(machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "CPU Requested ($Node)",
        "type": "gauge"
      },
      {
        "datasource": "$cluster",
        "description": "Memory requested vs total available",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "#73BF69", "value": null },
                { "color": "#FF9830", "value": 65 },
                { "color": "#F2495C", "value": 90 }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 4, "x": 12, "y": 16 },
        "id": 8,
        "options": {
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "showThresholdLabels": false,
          "showThresholdMarkers": true
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",node=~\"^$Node$\",resource=\"memory\"}) / sum(machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Memory Requested ($Node)",
        "type": "gauge"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" },
            "decimals": 2,
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 2, "x": 16, "y": 16 },
        "id": 11,
        "options": {
          "colorMode": "none",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[2m]))",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "CPU Used",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" },
            "decimals": 2,
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 2, "x": 18, "y": 16 },
        "id": 73,
        "options": {
          "colorMode": "none",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",node=~\"^$Node$\",resource=\"cpu\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "CPU Req",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" },
            "decimals": 2,
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 2, "x": 20, "y": 16 },
        "id": 69,
        "options": {
          "colorMode": "none",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "CPU Total",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "fixedColor": "rgb(31, 120, 193)", "mode": "fixed" },
            "decimals": 2,
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": { "h": 5, "w": 2, "x": 22, "y": 16 },
        "id": 65,
        "options": {
          "colorMode": "none",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
          "textMode": "auto"
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"})",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Mem Total",
        "type": "stat"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "CPU Cores",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 30,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 0, "y": 21 },
        "id": 20,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[2m]))",
            "legendFormat": "Used",
            "refId": "A"
          },
          {
            "expr": "sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",node=~\"^$Node$\",resource=\"cpu\"})",
            "legendFormat": "Requested",
            "refId": "B"
          },
          {
            "expr": "sum(machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})",
            "legendFormat": "Total",
            "refId": "C"
          }
        ],
        "title": "Cluster CPU Usage",
        "type": "timeseries"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 30,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 12, "y": 21 },
        "id": 21,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})",
            "legendFormat": "Used",
            "refId": "A"
          },
          {
            "expr": "sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",node=~\"^$Node$\",resource=\"memory\"})",
            "legendFormat": "Requested",
            "refId": "B"
          },
          {
            "expr": "sum(machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"})",
            "legendFormat": "Total",
            "refId": "C"
          }
        ],
        "title": "Cluster Memory Usage",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 28 },
        "id": 47,
        "panels": [],
        "title": "Namespace Usage",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "CPU Cores",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "hue",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineWidth": 1,
              "scaleDistribution": { "type": "linear" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 0, "y": 29 },
        "id": 91,
        "options": {
          "barRadius": 0.1,
          "barWidth": 0.8,
          "groupWidth": 0.7,
          "legend": { "calcs": [], "displayMode": "list", "placement": "right" },
          "orientation": "horizontal",
          "showValue": "auto",
          "stacking": "none",
          "tooltip": { "mode": "single", "sort": "none" },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": 0
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "topk(10,sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",resource=\"cpu\"}) by (namespace))",
            "legendFormat": "{{namespace}}",
            "refId": "A"
          }
        ],
        "title": "Top 10 Namespaces by CPU Requests",
        "type": "barchart"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "hue",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineWidth": 1,
              "scaleDistribution": { "type": "linear" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 12, "y": 29 },
        "id": 89,
        "options": {
          "barRadius": 0.1,
          "barWidth": 0.8,
          "groupWidth": 0.7,
          "legend": { "calcs": [], "displayMode": "list", "placement": "right" },
          "orientation": "horizontal",
          "showValue": "auto",
          "stacking": "none",
          "tooltip": { "mode": "single", "sort": "none" },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": 0
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "topk(10,sum(kube_pod_container_resource_requests{job=\"kube-state-metrics\",resource=\"memory\"}) by (namespace))",
            "legendFormat": "{{namespace}}",
            "refId": "A"
          }
        ],
        "title": "Top 10 Namespaces by Memory Requests",
        "type": "barchart"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "CPU Cores",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 20,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 0, "y": 36 },
        "id": 93,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "right" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "topk(20, sum by (namespace, pod) (label_replace(rate(container_cpu_usage_seconds_total{id=~\".*pod[a-f0-9_]+.*\"}[2m]), \"uid_normalized\", \"$1\", \"id\", \".*-pod([a-f0-9_]+)\\\\.slice.*\") * on(uid_normalized) group_left(namespace, pod) label_replace(kube_pod_info{job=\"kube-state-metrics\",namespace=~\"$namespace\"}, \"uid_normalized\", \"${1}_${2}_${3}_${4}_${5}\", \"uid\", \"([0-9a-f]+)-([0-9a-f]+)-([0-9a-f]+)-([0-9a-f]+)-([0-9a-f]+)\")))",
            "legendFormat": "{{namespace}}/{{pod}}",
            "refId": "A"
          }
        ],
        "title": "Top 20 Pods CPU Usage",
        "type": "timeseries"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 20,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 12, "y": 36 },
        "id": 95,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "right" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "topk(20, sum by (namespace, pod) (label_replace(container_memory_working_set_bytes{id=~\".*pod[a-f0-9_]+.*\"}, \"uid_normalized\", \"$1\", \"id\", \".*-pod([a-f0-9_]+)\\\\.slice.*\") * on(uid_normalized) group_left(namespace, pod) label_replace(kube_pod_info{job=\"kube-state-metrics\",namespace=~\"$namespace\"}, \"uid_normalized\", \"${1}_${2}_${3}_${4}_${5}\", \"uid\", \"([0-9a-f]+)-([0-9a-f]+)-([0-9a-f]+)-([0-9a-f]+)-([0-9a-f]+)\")))",
            "legendFormat": "{{namespace}}/{{pod}}",
            "refId": "A"
          }
        ],
        "title": "Top 20 Pods Memory Usage",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 43 },
        "id": 400,
        "panels": [],
        "title": "Container Health",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "Restarts",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "bars",
              "fillOpacity": 80,
              "gradientMode": "hue",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "normal" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
          },
          "overrides": []
        },
        "gridPos": { "h": 6, "w": 24, "x": 0, "y": 44 },
        "id": 101,
        "options": {
          "legend": { "calcs": ["sum"], "displayMode": "table", "placement": "right" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "increase(kube_pod_container_status_restarts_total{job=\"kube-state-metrics\"}[5m]) > 0",
            "legendFormat": "{{container}}",
            "refId": "A"
          }
        ],
        "title": "Container Restarts",
        "type": "timeseries"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                { "color": "green", "value": null },
                { "color": "red", "value": 80 }
              ]
            }
          },
          "overrides": [
            {
              "matcher": { "id": "byName", "options": "Restarts" },
              "properties": [
                {
                  "id": "custom.displayMode",
                  "value": "color-background-solid"
                },
                {
                  "id": "thresholds",
                  "value": {
                    "mode": "absolute",
                    "steps": [
                      { "color": "green", "value": null },
                      { "color": "#FF9830", "value": 5 },
                      { "color": "#F2495C", "value": 10 }
                    ]
                  }
                }
              ]
            }
          ]
        },
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 50 },
        "id": 401,
        "options": {
          "footer": { "fields": "", "reducer": ["sum"], "show": false },
          "showHeader": true,
          "sortBy": [{ "desc": true, "displayName": "Restarts" }]
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum by (namespace,pod,container) (kube_pod_container_status_restarts_total{job=\"kube-state-metrics\"})",
            "format": "table",
            "instant": true,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Container Restart Count",
        "transformations": [
          { "id": "organize", "options": { "excludeByName": { "Time": true }, "indexByName": {}, "renameByName": { "Value": "Restarts", "container": "Container", "namespace": "Namespace", "pod": "Pod" } } }
        ],
        "type": "table"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "thresholds" },
            "custom": {
              "align": "auto",
              "displayMode": "auto",
              "inspect": false
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
          },
          "overrides": [
            {
              "matcher": { "id": "byName", "options": "Reason" },
              "properties": [
                {
                  "id": "custom.displayMode",
                  "value": "color-background-solid"
                },
                {
                  "id": "mappings",
                  "value": [
                    { "options": { "CrashLoopBackOff": { "color": "#F2495C", "index": 0, "text": "CrashLoopBackOff" } }, "type": "value" },
                    { "options": { "ImagePullBackOff": { "color": "#FF9830", "index": 1, "text": "ImagePullBackOff" } }, "type": "value" },
                    { "options": { "ErrImagePull": { "color": "#FF9830", "index": 2, "text": "ErrImagePull" } }, "type": "value" },
                    { "options": { "ContainerCreating": { "color": "#5794F2", "index": 3, "text": "ContainerCreating" } }, "type": "value" }
                  ]
                }
              ]
            }
          ]
        },
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 50 },
        "id": 402,
        "options": {
          "footer": { "fields": "", "reducer": ["sum"], "show": false },
          "showHeader": true
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "kube_pod_container_status_waiting_reason{job=\"kube-state-metrics\",reason!=\"\"} > 0",
            "format": "table",
            "instant": true,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Containers in Waiting State",
        "transformations": [
          { "id": "organize", "options": { "excludeByName": { "Time": true, "Value": true, "__name__": true, "container": false, "endpoint": true, "instance": true, "job": true, "service": true, "uid": true }, "indexByName": {}, "renameByName": { "container": "Container", "namespace": "Namespace", "pod": "Pod", "reason": "Reason" } } }
        ],
        "type": "table"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 58 },
        "id": 103,
        "panels": [],
        "title": "API Server",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "requests/sec",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 20,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 0, "y": 59 },
        "id": 105,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(apiserver_request_total[5m])) by (verb)",
            "legendFormat": "{{verb}}",
            "refId": "A"
          }
        ],
        "title": "API Server Request Rate by Verb",
        "type": "timeseries"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "requests/sec",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 20,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
          },
          "overrides": [
            {
              "matcher": { "id": "byRegexp", "options": "/^[45].*/" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } }]
            }
          ]
        },
        "gridPos": { "h": 7, "w": 12, "x": 12, "y": 59 },
        "id": 115,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(apiserver_request_total[5m])) by (code)",
            "legendFormat": "{{code}}",
            "refId": "A"
          }
        ],
        "title": "API Server Requests by Response Code",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 66 },
        "id": 34,
        "panels": [],
        "title": "Network I/O",
        "type": "row"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": true,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 30,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "Bps"
          },
          "overrides": [
            {
              "matcher": { "id": "byName", "options": "Received" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#73BF69", "mode": "fixed" } }]
            },
            {
              "matcher": { "id": "byName", "options": "Sent" },
              "properties": [{ "id": "color", "value": { "fixedColor": "#5794F2", "mode": "fixed" } }]
            }
          ]
        },
        "gridPos": { "h": 7, "w": 12, "x": 0, "y": 67 },
        "id": 32,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(container_network_receive_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[2m]))",
            "legendFormat": "Received",
            "refId": "A"
          },
          {
            "expr": "-sum(rate(container_network_transmit_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[2m]))",
            "legendFormat": "Sent",
            "refId": "B"
          }
        ],
        "title": "Cluster Network I/O",
        "type": "timeseries"
      },
      {
        "datasource": "$cluster",
        "fieldConfig": {
          "defaults": {
            "color": { "mode": "palette-classic" },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 20,
              "gradientMode": "opacity",
              "hideFrom": { "legend": false, "tooltip": false, "viz": false },
              "lineInterpolation": "smooth",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": { "type": "linear" },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": { "group": "A", "mode": "none" },
              "thresholdsStyle": { "mode": "off" }
            },
            "mappings": [],
            "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
            "unit": "Bps"
          },
          "overrides": []
        },
        "gridPos": { "h": 7, "w": 12, "x": 12, "y": 67 },
        "id": 33,
        "options": {
          "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "right" },
          "tooltip": { "mode": "multi", "sort": "desc" }
        },
        "pluginVersion": "9.0.0",
        "targets": [
          {
            "expr": "sum(rate(container_network_receive_bytes_total{namespace=~\"$namespace\"}[2m])) by (pod)",
            "legendFormat": "{{pod}} rx",
            "refId": "A"
          }
        ],
        "title": "Pod Network Receive ($namespace)",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "datasource": "$cluster",
        "gridPos": { "h": 1, "w": 24, "x": 0, "y": 74 },
        "id": 500,
        "panels": [
          {
            "datasource": "$cluster",
            "fieldConfig": {
              "defaults": {
                "color": { "mode": "thresholds" },
                "custom": {
                  "align": "auto",
                  "displayMode": "auto",
                  "inspect": false
                },
                "mappings": [],
                "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
                "unit": "bytes"
              },
              "overrides": [
                {
                  "matcher": { "id": "byName", "options": "Usage %" },
                  "properties": [
                    {
                      "id": "custom.displayMode",
                      "value": "gradient-gauge"
                    },
                    {
                      "id": "max",
                      "value": 100
                    },
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          { "color": "#73BF69", "value": null },
                          { "color": "#FF9830", "value": 70 },
                          { "color": "#F2495C", "value": 85 }
                        ]
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": { "h": 8, "w": 24, "x": 0, "y": 75 },
            "id": 501,
            "options": {
              "footer": { "fields": "", "reducer": ["sum"], "show": false },
              "showHeader": true,
              "sortBy": [{ "desc": true, "displayName": "Usage %" }]
            },
            "pluginVersion": "9.0.0",
            "targets": [
              {
                "expr": "sum by (namespace, persistentvolumeclaim) (kubelet_volume_stats_used_bytes)",
                "format": "table",
                "instant": true,
                "legendFormat": "",
                "refId": "A"
              },
              {
                "expr": "sum by (namespace, persistentvolumeclaim) (kubelet_volume_stats_capacity_bytes)",
                "format": "table",
                "instant": true,
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "PVC Usage",
            "transformations": [
              { "id": "merge", "options": {} },
              { "id": "organize", "options": { "excludeByName": { "Time": true }, "indexByName": {}, "renameByName": { "Value #A": "Used", "Value #B": "Capacity", "namespace": "Namespace", "persistentvolumeclaim": "PVC" } } },
              { "id": "calculateField", "options": { "alias": "Usage %", "binary": { "left": "Used", "operator": "/", "reducer": "sum", "right": "Capacity" }, "mode": "binary", "reduce": { "reducer": "sum" } } },
              { "id": "calculateField", "options": { "alias": "Usage %", "binary": { "left": "Usage %", "operator": "*", "reducer": "sum", "right": "100" }, "mode": "binary", "reduce": { "reducer": "sum" }, "replaceFields": false } }
            ],
            "type": "table"
          }
        ],
        "title": "Storage (PVC)",
        "type": "row"
      }
    ],
    "refresh": "30s",
    "schemaVersion": 36,
    "style": "dark",
    "tags": ["kubernetes", "k3s", "prometheus"],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "Prometheus",
            "value": "Prometheus"
          },
          "hide": 0,
          "includeAll": false,
          "label": "Data Source",
          "multi": false,
          "name": "cluster",
          "options": [],
          "query": "prometheus",
          "queryValue": "",
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "type": "datasource"
        },
        {
          "allValue": ".*",
          "current": {},
          "datasource": "$cluster",
          "definition": "label_values(kube_node_info, node)",
          "hide": 0,
          "includeAll": true,
          "label": "Node",
          "multi": false,
          "name": "Node",
          "options": [],
          "query": { "query": "label_values(kube_node_info, node)", "refId": "Node-Variable-Query" },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": false,
          "sort": 1,
          "type": "query"
        },
        {
          "allValue": ".*",
          "current": {},
          "datasource": "$cluster",
          "definition": "label_values(kube_namespace_created, namespace)",
          "hide": 0,
          "includeAll": true,
          "label": "Namespace",
          "multi": true,
          "name": "namespace",
          "options": [],
          "query": { "query": "label_values(kube_namespace_created, namespace)", "refId": "Namespace-Variable-Query" },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": false,
          "sort": 1,
          "type": "query"
        },
        {
          "current": {},
          "datasource": "$cluster",
          "definition": "label_values(container_cpu_usage_seconds_total{namespace=\"$namespace\",container!=\"POD\",container!=\"\"},container)",
          "hide": 0,
          "includeAll": true,
          "label": "Application",
          "multi": true,
          "name": "application",
          "options": [],
          "query": { "query": "label_values(container_cpu_usage_seconds_total{namespace=\"$namespace\",container!=\"POD\",container!=\"\"},container)", "refId": "Application-Variable-Query" },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": false,
          "sort": 1,
          "type": "query"
        }
      ]
    },
    "time": { "from": "now-3h", "to": "now" },
    "timepicker": {
      "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]
    },
    "timezone": "browser",
    "title": "K3s Cluster Monitoring",
    "uid": "k3s_monitoring",
    "version": 2
  },
  "overwrite": true
}
