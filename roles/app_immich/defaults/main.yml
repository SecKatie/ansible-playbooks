---
# Immich Configuration

# Namespace
immich_namespace: "immich"

# Container images (use "release" for latest stable, or pin to specific version like "v2.3.1")
immich_version: "release"
immich_server_image: "ghcr.io/immich-app/immich-server"
immich_ml_image: "ghcr.io/immich-app/immich-machine-learning"

# PostgreSQL with VectorChord (required for Immich smart search)
# Use the official Immich postgres image which includes vectorchord and pgvectors
immich_postgres_image: "ghcr.io/immich-app/postgres"
immich_postgres_version: "14-vectorchord0.4.3-pgvectors0.2.0"

# Valkey (Redis-compatible, recommended by Immich)
immich_redis_image: "docker.io/valkey/valkey"
immich_redis_version: "8"

# Resource limits - Server
immich_server_cpu_request: "100m"
immich_server_memory_request: "512Mi"
immich_server_cpu_limit: "2"
immich_server_memory_limit: "4Gi"

# Resource limits - Machine Learning
immich_ml_cpu_request: "500m"
immich_ml_memory_request: "1Gi"
immich_ml_cpu_limit: "4"
immich_ml_memory_limit: "4Gi"

# Resource limits - PostgreSQL
immich_postgres_cpu_request: "100m"
immich_postgres_memory_request: "256Mi"
immich_postgres_cpu_limit: "1"
immich_postgres_memory_limit: "1Gi"

# Resource limits - Redis
immich_redis_cpu_request: "50m"
immich_redis_memory_request: "64Mi"
immich_redis_cpu_limit: "200m"
immich_redis_memory_limit: "128Mi"

# Storage configuration
immich_storage_class: "longhorn"
immich_postgres_storage: "10Gi"
immich_ml_cache_storage: "10Gi"

# NFS storage for photos/videos (large capacity)
immich_nfs_server: "172.16.10.248"
immich_nfs_path: "/volume2/immich"
immich_nfs_storage: "500Gi"

# Ingress configuration
immich_ingress_enabled: true
immich_ingress_host: "photos.corp.mulliken.net"
immich_tls_secret_name: "photos-tls"

# External access via Cloudflare tunnel (optional)
immich_cloudflare_tunnel_enabled: false
immich_cloudflare_tunnel_name: "immich-tunnel"
immich_cloudflare_tunnel_secret_name: "immich-tunnel-credentials"
immich_external_url: "https://photos.mulliken.net"

# Machine Learning settings
immich_ml_enabled: true

# Node affinity - run on RHEL nodes (x86_64 for better performance)
immich_node_selector:
  kubernetes.io/arch: amd64
